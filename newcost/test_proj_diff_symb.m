syms x11_1 x21_1 x31_1 x41_1 x12_1 x22_1 x32_1 x42_1 x13_1 x23_1 x33_1 x43_1
syms x11_2 x21_2 x31_2 x41_2 x12_2 x22_2 x32_2 x42_2 x13_2 x23_2 x33_2 x43_2
syms x11_3 x21_3 x31_3 x41_3 x12_3 x22_3 x32_3 x42_3 x13_3 x23_3 x33_3 x43_3
syms y11_1 y21_1 y31_1 y41_1 y12_1 y22_1 y32_1 y42_1 y13_1 y23_1 y33_1 y43_1
syms y11_2 y21_2 y31_2 y41_2 y12_2 y22_2 y32_2 y42_2 y13_2 y23_2 y33_2 y43_2
syms y11_3 y21_3 y31_3 y41_3 y12_3 y22_3 y32_3 y42_3 y13_3 y23_3 y33_3 y43_3

% X =[x11_1 x12_1 x13_1;
%     x21_1 x22_1 x23_1;
%     x31_1 x32_1 x33_1;
%     x41_1 x42_1 x43_1;
%     x11_2 x12_2 x13_2;
%     x21_2 x22_2 x23_2;
%     x31_2 x32_2 x33_2;
%     x41_2 x42_2 x43_2;
%     x11_3 x12_3 x13_3;
%     x21_3 x22_3 x23_3;
%     x31_3 x32_3 x33_3;
%     x41_3 x42_3 x43_3];

% Y =[y11_1 y12_1 y13_1;
%     y21_1 y22_1 y23_1;
%     y31_1 y32_1 y33_1;
%     y41_1 y42_1 y43_1;
%     y11_2 y12_2 y13_2;
%     y21_2 y22_2 y23_2;
%     y31_2 y32_2 y33_2;
%     y41_2 y42_2 y43_2;
%     y11_3 y12_3 y13_3;
%     y21_3 y22_3 y23_3;
%     y31_3 y32_3 y33_3;
%     y41_3 y42_3 y43_3];

nrs = 4;
d = 3;
N = 2;

X = symmatrix('X',[nrs*N, d])
Y = symmatrix('Y',[nrs*N, d])


f = Y * X' * Y;
Df = diff(f,X)


